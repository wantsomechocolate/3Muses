{{extend 'layout.html'}}

<div class="container-fluid style1">

	<div class='container'>

{{ if cart_information['error']==False: }}

	{{ for i in range(len(cart_information['cart_information_LOD'])): }}

		<div class="row cart-view-cart-row">

			<div class="col-md-1 col-md-offset-2 cart-view-cart-item-tn">
				{{ =cart_information['cart_information_LOD'][i]['product_image_url'] }}
			</div>

						
			<div class="col-xs-8 col-md-5 cart-view-cart-item-name cart-view-cart-row-child">

				<div> <!-- For vertically centering -->
					{{ =cart_information['cart_information_LOD'][i]['product_name'] }}
				</div>

			</div>

			<div class="col-xs-4 col-md-1 cart-view-cart-item-cost cart-view-cart-row-child">

				<div> <!-- For vertically centering -->
					{{ ="%.2f" % cart_information['cart_information_LOD'][i]['product_cost'] }}
				</div>

			</div>



 

			<div class="col-xs-offset-8 col-xs-4 col-md-offset-0 col-md-1 cart-view-cart-item-remove-container cart-view-cart-row-child">

			<button type="button" 
				class="btn btn-default cart-view-cart-controls-popover" 
				data-container="body" 
				data-toggle="popover" 
				data-placement="left" 
				data-trigger="focus" 
				data-html="true" 
				data-content="{{ =cart_information['cart_information_LOD'][i]['product_delete_button'].xml() }}">
			 
				<span class="glyphicon glyphicon-triangle-bottom" aria-hidden="true"></span>

			</button>
				

			</div>

		</div>


	{{pass}}

{{ else: }}

		<div class="row">

			<div class="col-md-8 col-md-offset-2 align-hcenter cart-view-error-text-container">

				{{ =cart_information['error_message'] }}

			</div>

		</div>

{{ pass }}



		<div class="row">

			<div class="col-md-3 col-md-offset-7 align-right cart-view-btn-container">

				<form action="{{=URL('default','categories')}}">

					<input type="submit" value="Back to Shopping" class="btn btn-info cart-view-btn">

				</form>

			</div>

		</div>




	</div>

</div>





{{ if cart_information['error']==True: }}

{{else:}}

		<!--The Address Container-->

		<div class="container-fluid style2">

			<div class='container'>





		{{ if address_information['error']==False: }}

			{{ for i in range(len(address_information['address_information_LOD'])): }}

				<div class="row cart-view-address-info-container">

					<div class="col-md-offset-2 col-md-7 cart-view-address-info" id="{{ =address_information['address_information_LOD'][i]['id'] }}">

				{{ if address_information['address_information_LOD'][i]['default_address']: }}
						{{ =INPUT(_type='radio', _name='address', _value=address_information['address_information_LOD'][i]['id'], _checked='checked') }}
				{{ else: }}
						{{ =INPUT(_type='radio', _name='address', _value=address_information['address_information_LOD'][i]['id']) }}
				{{ pass }}

			  			<div class="cart-view-address-info-child">
			          	{{ =address_information['address_information_LOD'][i]['first_name'] }}
			          	{{ =address_information['address_information_LOD'][i]['last_name'] }}
			          	</div>
							          	
			          	<div class="cart-view-address-info-child">
			          	{{ =address_information['address_information_LOD'][i]['street_address_line_1'] }}
			          	{{ =address_information['address_information_LOD'][i]['street_address_line_2'] }}
			          	</div>

			          	<div class="cart-view-address-info-child">
			          	{{ =address_information['address_information_LOD'][i]['municipality'] }},
			          	{{ =address_information['address_information_LOD'][i]['administrative_area'] }}
			          	{{ =address_information['address_information_LOD'][i]['postal_code'] }}
			          	</div>

			          	<div class="cart-view-address-info-child">
			          	{{ =address_information['address_information_LOD'][i]['country'] }}
			          	</div>


				    </div> <!-- Close the div that can be clicked to pick shipping address -->


				    <div class="col-xs-offset-8 col-xs-4 col-md-offset-0 col-md-1 cart-view-address-controls" id="cart-view-address-controls-{{ =i }}">


						<button type="button" 
							class="btn btn-default cart-view-address-controls-popover" 
							data-container="#cart-view-address-controls-{{ =i }}"
							data-toggle="popover" 
							data-placement="left" 
							data-trigger="focus" 
							data-html="true" 
							data-content="<div class='col-xs-6 col-md-12'>
				            {{ =A('Edit', _href=URL('edit_address', vars=dict(pri_key=address_information['address_information_LOD'][i]['id'])), _class='btn btn-primary cart-view-address-controls-button').xml() }}
				            </div>

				          	<div class='col-xs-6 col-md-12'>
				            {{ =A('Delete', _href=URL('delete_address', vars=dict(pri_key=address_information['address_information_LOD'][i]['id'],redirect_url=URL('cart'))), _class='btn btn-danger cart-view-address-controls-button').xml() }}
				            </div>
				            ">
							
							<span class="glyphicon glyphicon-triangle-bottom" aria-hidden="true"></span>
							
						</button>

				    </div>


				</div>			
								<br/>
								<br/>

			{{pass}}  <!--For the for loop-->

		{{ else: }}


				<div class="row">

					<div class="col-md-8 col-md-offset-2 align-hcenter cart-view-error-text-container">

						{{ =address_information['error_message'] }}

					</div>

				</div>


		{{ pass }}




				<div class="row">

					<div class="col-md-3 col-md-offset-7 align-right cart-view-btn-container">

						<form action="{{=URL('default','add_new_address')}}">

						    <input type="submit" value="Add New Address" class="btn btn-info cart-view-btn">

						</form>

					</div>

				</div>




			</div>

		</div>




		{{ if address_information['error']==True: }}


		{{ else: }}


				<!--The Shipping Container-->

				<div class="container-fluid style1">

					<div class='container' id='shipping_target'>


						<!-- All styles and classes are done server side for the shipping-->
						<div class="row">
							<div class="col-md-offset-2 col-md-8 align-hcenter cart-view-error-text-container">	
								{{=shipping_information['error_message']}}
							</div>
						</div>


					</div>

				</div>



				<div class="container-fliud style2">

					<div class='container'>


							<div class="row">

								<div class="col-md-8 col-md-offset-2 checkout-view-payment-group-container">

									<!--<a class="btn btn-sucess" href=" cbcb =URL('checkout') cbcb ">Checkout</a>-->
									<h2 class="checkout-view-payment-group-header">Total Cost</h2>
									<hr class="checkout-view-hr">

									<div class="col-md-4">
										<h3 class="align-right">Cart Subtotal</h3>
										<div class="align-right">{{ ="%.2f" % cart_information['cart_cost_USD'] }}</div>
									</div>

									<div class="col-md-4">
										<h3 class="align-right">Shipping Costs</h3>
										<div id="cart-view-summary-shipping-cost-div" class="align-right">Select Shipping</div>
									</div>

									<div class="col-md-4">
										<h2 class="align-right">Final Cost</h2>
										<div id="cart-view-summary-total-cost-div" class="align-right">Select Shipping</div>
									</div>


									<hr class="checkout-view-hr">
									<br>

								</div>

							</div>


					</div>

				</div>






				<!-- Button to move to checkout -->
				<div class="container-fliud style1">

					<div class='container'>


							<div class="row">

								<div class="col-md-3 col-md-offset-7 align-right">

									<!--<a class="btn btn-sucess" href=" cbcb =URL('checkout') cbcb ">Checkout</a>-->

									<form action="{{=URL('checkout')}}">
									    <input type="submit" value="Proceed to Payment Options" class="btn btn-success cart-view-btn">
									</form>

								</div>

							</div>


					</div>

				</div>






		{{ pass }} <!-- This ends the check to see if the address sections has an error, which would not load the remaining checkout components. It wraps up shipping and payment information.-->

{{pass}} <!--This Ends the check to see if the cart had an error, which would not load the remaining checkout components it basically wraps up evertyihing except the cart-->
